<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Example</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" media="screen" title="no title" charset="utf-8">
    <link rel="stylesheet" href="css/style.css" media="screen" title="no title" charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
    <script>
        var listApp = angular.module('listApp', []);
        listApp.controller('ListController', ['$scope', '$http', function($scope, $http) {
            $http.get('/api/books').success(function(data) {
                $scope.books = data;
            }).error(function(data) {
                console.log('Error: ' + data);
            });

            $http.get('/api/detail/:title').success(function(data) {
                $scope.title = data;
            }).error(function(data) {
                console.log('Error: ' + data);
            });

            $http.get('/api/search').success(function(data) {
                $scope.title = data;
            }).error(function(data) {
                console.log('Error: ' + data);
            });

            $http.post('/api/delete').success(function(data) {
                $scope.title = data;
            }).error(function(data) {
                console.log('Error: ' + data);
            });

            $http.post('/api/add').success(function(data) {
                $scope.title = data;
            }).error(function(data) {
                console.log('Error: ' + data);
            });

            $scope.buttonText = 'Submit';
            // $scope.myData = [
            //   {title: 'moby dick', author: 'herman melville', price: 25.00},
            //   {title: 'great expectations', author: 'charles dickens', price: 30.00},
            //   {title: 'don quixote', author: 'miguel de cervantez', price: 40.00},
            //   {title: 'the merchant of venice', author: 'william shakespeare', price: 22.00}
            // ];

            // custom methods
            $scope.showDetail = function(book) {
                $scope.detail = true;
                $scope.currentBook = book;
                // code here to update any variables referenced by the view template
            };
            $scope.resetForm = function() {
                $scope.title = '';
            };

        }]);
    </script>
</head>

<!--View template. Add necessary Angular directives -->

<body ng-app="listApp">
    <div class="wrapper">
        <div class="col-sm-12 main">
              <div ng-controller="ListController">
                <div class="col-sm-4 panel panel-default">
                    <div class="panel-body">
                        <h2>Search :</h2>
                        <div class="form-input">
                            <input type="text" ng-model="title">
                        </div>
                        <div class="display clearfix" ng-bind="title">
                            <label>Title: {{title}}</label>
                            <button ng-click="resetForm()">{{buttonText}}</button>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <ul>
                                    <!-- <li class="links"><a class="link-internal" href="/detail/{{title}}">
      {{title}}</a> By {{author}}</li> -->
                                    <li ng-repeat="book in books" class="links"><a class="link-internal" ng-click="showDetail(book)">{{book.title}}</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-8 panel panel-default">
                  <div class="panel-body">
                    <h3>Total: {{books.length}}</h3>
                    <div ng-show="detail" class="detail">
                      <ul>
                        <li>
                          <span> By {{currentBook.author}}</span>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
          </div>
        <footer class="flex-container">
            <span class="copyright">This site and it's contents are &copy; Blake Schwartz, 2016</span>
        </footer>
    </div>
    <!-- close container -->
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</body>

</html>
